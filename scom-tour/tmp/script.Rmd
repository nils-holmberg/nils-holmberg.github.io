
```{r }
#~ ##################################################################### 201106
#resume, results for publication

#library(rmarkdown)
input="src/scom-tour.ipynb"
rmarkdown:::convert_ipynb(input, output=xfun::with_ext(input, "Rmd"))




#spin script to rmd
#knitr::spin('tmp/script.R', knit=FALSE)
#echo "knitr::spin('"$(head -n46 src/survey.R)"', knit=FALSE)" | R --slave
#echo "knitr::spin('tmp/script.R', knit=FALSE)" | R --slave
#Rscript -e "knitr::spin('tmp/script.R', knit=FALSE)"

#read csv
dfc = read.table("csv/survey-200922.csv", sep='\t', header=T, strip.white=TRUE)


#~ ##################################################################### 200922
#regression models


#export csv
#write.table(dfc, "csv/survey-200922.csv", sep="\t", row.names=F)


#~ ##################################################################### 200917
#regression models
library(lme4)
#library(performance)

#fix colnames
colnames(dfc)[c(53,54,64,67,68,69,71)] = c("demo_age","demo_gender","demo_nationality","gen_trav_sum","gen_trav_int","gen_trav_bin","dest_trav_int")
#remove gender value 3 !
dfc$demo_gender = as.factor(ifelse(dfc$demo_gender==3, NA, dfc$demo_gender))
#travel binary
dfc$trav_freq_bin = ifelse(dfc$trav_freq_int==1, 1, 2)
#remove response value 6 !
dfc$dest_sec = ifelse(dfc$VAR04_15==6, NA, dfc$VAR04_15)
#mean index ?
#dfc$dest_sec_mean = rowMeans(dfc[, 22])
#destination travelling frequency
dfc$dest_freq_int = dfc$VAR01
```

